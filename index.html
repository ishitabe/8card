<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>8カード</title>
<style>
  :root { --cardW: 120px; --img: 72px; --gap: 10px; }
  body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin:16px; }
  header { position:sticky; top:0; background:#fff; z-index:60; padding-bottom:8px; }
  h1 { margin:0 0 10px; font-size:20px; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
  .btn { padding:10px 14px; border-radius:10px; border:2px solid #111; background:#fff; cursor:pointer; font-weight:800; }
  .btn:disabled { opacity:.45; cursor:not-allowed; }
  .btn.modeActive { background:#000; color:#fff; border-color:#000; }

  .pill { padding:3px 8px; border:1px solid #aaa; border-radius:999px; font-size:12px; }
  .badge { margin-left:8px; padding:3px 10px; border-radius:999px; font-weight:900; border:2px solid #111; }

  .row { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
  .zone { border:1px solid #ccc; border-radius:10px; padding:12px; margin:10px 0; }
  .hand { display:flex; gap:8px; flex-wrap:wrap; }
  .card { appearance:none; -webkit-appearance:none; border:3px solid #777; border-radius:10px;
           background:#fff; padding:6px 8px; min-width:92px; text-align:center;
           cursor:pointer; user-select:none; font-weight:800; display:inline-flex;
           flex-direction:column; gap:4px; align-items:center; color:#111; }
  .card img { width:var(--img); height:var(--img); object-fit:contain; }
  .card.selected { outline:3px solid #000; }
  .card.winB { border-color:#e11; }
  .card.loseB { border-color:#15f; }

  .playedRow { display:flex; align-items:center; justify-content:center; gap:16px; flex-wrap:nowrap; }
  .playedSlot .card img { width:var(--img); height:var(--img); }

  .flipWrap { width:calc(var(--img) + 16px); height:calc(var(--img) + 50px); perspective: 900px; }
  .flipInner { position:relative; width:100%; height:100%; transform-style:preserve-3d; transition: transform 600ms ease; }
  .flipWrap.flipped .flipInner { transform: rotateY(180deg); }
  .face { position:absolute; inset:0; display:flex; flex-direction:column; gap:4px; align-items:center; justify-content:center; backface-visibility:hidden; }
  .face.back .q { width:var(--img); height:var(--img); border:3px dashed #555; border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:900; font-size:24px; }
  .face.front { transform: rotateY(180deg); }
  .face .lbl { font-weight:800; }

  .resultFlag { font-weight:900; padding:6px 12px; border-radius:999px; border:2px solid #111; display:inline-block; }
  .resultFlag.win { background:#f0fff0; }
  .resultFlag.lose { background:#fff0f0; }
  .resultFlag.draw { background:#f7f7f7; }
  .hidden { display:none; }

  .effectPreview { border:2px dashed #aaa; border-radius:10px; padding:10px; background:#fafafa; }

  .log { max-height:34vh; overflow:auto; font-family:ui-monospace,Menlo,Consolas,monospace; font-size:12px; }
  .log .line { white-space:pre-wrap; line-height:1.35; }

  .confetti { position:fixed; inset:0; pointer-events:none; z-index:30; }
  .confetti i{ position:absolute; top:-10px; width:8px; height:12px; background:currentColor;
    animation: fall 1000ms ease-in forwards; opacity:.9 }
  @keyframes fall { to { transform: translateY(105vh) rotate(270deg); opacity:.95 } }

  #modalRoot, #overlayRoot { position:fixed; inset:0; z-index:40; }
  #modalRoot.hidden, #overlayRoot.hidden { display:none; }
  .modalBackdrop { position:absolute; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center; }
  .modal { background:#fff; border-radius:12px; border:2px solid #111; padding:16px; max-width:820px; width:clamp(300px,96vw,820px); }
  .overlayWin { position:absolute; inset:0; background:rgba(0,0,0,.45); display:flex; align-items:center; justify-content:center; }
  .overlayPanel { background:#fff; border:2px solid #111; border-radius:12px; padding:16px; text-align:center; min-width:280px; }

  .grid { display:grid; grid-template-columns:repeat(2, minmax(var(--cardW),1fr)); gap:8px; }
  @media (min-width:820px) { .grid { grid-template-columns:repeat(4, minmax(var(--cardW),1fr)); } }

  .strength { margin-left:8px; font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid #888; }
  .strength.elite { border-color:#d4380d; color:#d4380d; background:#fff2e8; font-weight:900; }
  .strength.how { background:#111; color:#fff; border-color:#111; }

  .streak-blue { color:#1890ff; }
  .streak-green { color:#52c41a; }
  .streak-yellow { color:#faad14; }
  .streak-orange { color:#fa8c16; }
  .streak-red { color:#f5222d; }
  .streak-rainbow {
    background: linear-gradient(90deg,#ff4d4f,#faad14,#73d13d,#40a9ff,#9254de,#13c2c2);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: rainbow-shift 3s linear infinite;
  }
  @keyframes rainbow-shift {
    from { background-position: 0% }
    to { background-position: 100% }
  }
</style>
</head>
<body>
<header>
  <h1>8カード
    <button id="btnStreak" class="btn">連勝</button>
    <button id="btnCustom" class="btn">カスタム</button>
    <button id="btnHow" class="btn">遊び方</button>
  </h1>
</header>

<div class="zone">
  <strong>ログ</strong>
  <div id="log" class="log"></div>
</div>

<div class="zone">
  <div class="row" style="justify-content:space-between;">
    <div><strong>スコア</strong>：あなた <span id="pWins">0</span> ー CPU <span id="cWins">0</span> ／ ラウンド <span id="roundNum">1</span></div>
    <div class="row" style="gap:10px;">
      <span class="pill" id="streakWrap">連勝：<span id="streak">0</span></span>
      <span class="pill" id="bestWrap">ベスト：<span id="bestStreak">0</span></span>
    </div>
  </div>
</div>

<div class="zone" id="board">
  <div class="row" style="align-items:flex-start; justify-content:space-between;">
    <div style="min-width:92px;">
      <strong>CPU手札</strong> <span id="cLast" class="pill"> </span>
      <span id="cpuStrength" class="strength">強さ：ノーマル</span>
    </div>
    <div id="cHand" class="hand"></div>
    <span id="cBuff" class="pill hidden">次×2</span>
  </div>

  <div class="row playedRow">
    <div style="text-align:center;">
      <div>あなた：</div>
      <div id="pPlay" class="playedSlot">—</div>
    </div>
    <div style="min-width:120px; text-align:center;">
      <span id="roundFlag" class="resultFlag draw hidden">結果</span>
    </div>
    <div style="text-align:center;">
      <div>CPU：</div>
      <div id="cPlay" class="playedSlot">—</div>
    </div>
  </div>

  <div class="row" style="align-items:flex-start; justify-content:space-between; margin-top:8px;">
    <div style="min-width:92px;">
      <strong>あなたの手札</strong> <span id="pLast" class="pill"> </span>
      <span id="pRun" class="badge hidden"></span>
    </div>
    <div id="pHand" class="hand"></div>
    <button id="btnPlay" class="btn" disabled>このカードで勝負！</button>
    <span id="pBuff" class="pill hidden">次×2</span>
  </div>

  <div class="effectPreview" style="margin-top:10px;">
    <h3>選択中のカード効果</h3>
    <div id="selectedEffect">手札からカードを選ぶと、ここに効果が表示されます。</div>
  </div>
</div>

<div class="zone">
  <h3>ルール</h3>
  <div style="white-space:pre-line;" id="rulesFull">基本ルール：数字の大きい方が勝ち
・ランダムに配られる4枚を手札とする 
・1枚ずつカードを出し合い勝敗を決める
・2回勝負し勝ち数の多い方が勝利（2-0 または 1勝1分けなら2戦で終了） 
・2戦で1勝1敗だった場合のみ延長し、どちらかが2勝した時点で終了 
・4戦しても 1勝1敗2分け の場合は引き分け</div>
</div>

<div class="zone">
  <h3>カード効果</h3>
  <div style="white-space:pre-line;">7 巨人：２妖精、３幽霊に負ける
6 皇帝：１奴隷に負ける
5 魔女：【復活】このカードで負けた時、魔女を手札に戻し好きなカードを1枚捨てる
4 市民：【底力】４戦目のみ強さを２倍にする
3 幽霊：７巨人に勝つ／【交換】相手の手札から１枚をランダムで奪い、手札から好きなカードを1枚返す
2 妖精：７巨人に勝つ／【強化】次ラウンドの自分カードの強さを２倍にする
1 奴隷：６皇帝に勝つ
0 傀儡：相手が１奴隷以外なら引き分けにする</div>
</div>

<div id="modalRoot" class="hidden"></div>
<div id="overlayRoot" class="hidden"></div>

<script>
(()=>{
  const $ = s => document.querySelector(s);
  const el = (t,a={}) => Object.assign(document.createElement(t), a);
  const sleep = ms => new Promise(r=>setTimeout(r,ms));
  const shuffle = a => { for(let i=a.length-1;i>0;i--){ const j=(Math.random()*(i+1))|0; [a[i],a[j]]=[a[j],a[i]]; } return a; };

  const NAMES = {7:"巨人",6:"皇帝",5:"魔女",4:"市民",3:"幽霊",2:"妖精",1:"奴隷",0:"傀儡"};
  const IMG = {"7": "data:image/png;base64,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", "6": "data:image/png;base64,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", "5": "data:image/png;base64,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", "4": "data:image/png;base64,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", "3": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAACXBIWXMAADXTAAA10wEMIUN3AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAALKUlEQVR42u3dzWtdRRQA8HPfS5PmJU0asRVdqCCIIF0oqBRtXLgoQrt0bfUfqDu7c9vu6tZN69qlihTBRVsRVFD8WogLURCpSqo2MUlfcl3I1ek4H+ecmbl3Zt6ZjdL03fdy369nzpmv27RtC9KkcVsjgKQJIGkCSJoAkiaAZvAGNA36BrRt2wgZAUSGI7gEEBrNEyun4JM/3hFQAsiNp4PyxMop8rUowGqHNBOATHhiNxeqmhFVD8jVbaWAZMNUK6KqAR1bfu7przY/uO7KbfpEVCOkqgF10ceXGHMRddd0vb72aFQtIBUPJvGlIlKv53ut/t4CqKC8xwRoZ6OFhbUmCBEFUM2IqgakfrHdF7iz8d/v2yciAVQZoA/e+AoAAJ5/9RgLkQ6C+hoBVCCeDlCHR20cSNRurEZE1QIy5T969DE1CiSJQpUBso04UwDZEJmAcCJQbYiqBWSrvnx4fIjU63MikAAqLAcyVV9YRFhMAmjGAHEQYaOSAKo8gebiiYlIABUGqMPTDRy+d+HL4PfCJto+RAKogO6L0nRc2PyHW4kJoIwjEHdpqopIBdTdq6ZpJA+apQik/o7dl+/C0AHq8Jheb7uGAKoMkP77mQDoP9MB2bDYEM5SIl0NIFf3ZYsgtp9hI1D3s5AIJDlQRnBc+Y8tWuh/bkuiXRGI040JoAzhYBLoLmL4ui9XEm34LNKF5Qxl/eBLR69uX7qR4vpqF2QaH6KU8QIow2hiiy4nR+fgyv75O74E/Tr6ACJl/AcLyZRwC6DM8LiWUag3X9+Foc9/mTDFGJUWQJnmMdTk0xaBTC1kPkwAFQDIFXlsN1wAzWgX1t1AW0mu3vATi2eeubp16cOhAHVQXNWalPGZ5EQUPH0AUpEIoIzLeFMk8uFJAchXeUkXVhAgzE3GAsKU9dSSnwJIFpQNkFinAmScOF2zXH/DXfp31xBAmY4L+W52SBfmA4TFI4AyS6Kxe8qfXD3d2ua/TJBSAvIhEkADVWG+iOSKXr5dGUMAkp2pPeAx/avlNhciFyAqnpiA1HEyARQAKBYk2/aemIBCuy9uFTrTgFyj0K726R/vQgstCxIGUIcHU77HAFQSnuwBmZrpy9nevwUrWw/BrfZX2ITf4Lv2Onk8x7fuJ0b0cQEKGb4QQFp/r/7X9fcn4xVYHq9BA2NYvX0/LMPdMIUd+KJ9m/S+71340gnIteQj5hRGiYiKW9LKecaF7bApKq7u/22RK8YcWGmIqtiVEbKuiNv0qBVrN0bIQKoASli9YXISCh5O9PEBWp+89PS1vy47D0bPDVF123pSPTzFt2c+dAZex2P7bAIoM0AuPDGTZxeg9cmZs9f+evOi6Vq5T3sUBajDYit/Y0efGBOnru5rfXLm7HS89dpHt95as10r92mP4saBqGNElIigfobY0Ud/v+PLL2xg4EgZnwCKelO5EciUW1ABhXaXmApRBhIZeHwTqba9YNzuS8eYIvqo7zcZr8CjS+vF4+kVUMxIEbN8N0WylMnzw5OnYHXuCOn3FEDMagk76BYz98Emz5j31Q8ivzm9AYfnjhYfdbIA5PsCqPvAuNUQFg8l+thznRYAmmrwZJMD2XKeFHhcpTvlgAVf5WT7TL9Pf/m3C6thaWs2VZhp+arrpsbKqQBwj0CwdV/Uxx3U9gjMwcaBCCeLRct/uHhMgKhjULU+hDfrwxVsN5kTffQvkHpyPeegKervJYAilfeu6QU98eU8XZDz2INQQIajh+WJhanHiGI8admFhxN91G42xuClAEqER2+f//k+3G532O+D2VwYWr5zxqAEUE+lPQDAxvRn+HX3R9jcu0nGxAUUE48AGgDRjd3v4ej8g2AahMN2ddyuSwAVAsgHaTJehaXxKiyND8ORA/ezyuVcAIUgynGXalGnc2AS6JiAUuChAsJsNNRh6dujZgoQB5MNWMyxH27FxV0sFmvdVOqusoiT6kPHXLiIuAvHfIB8iGLiSY2oqAiEGWj0LUbjAOIgco0VuebDOKf2Y8fOUiAqEpDtZmG+LGwuxNm2g40+ps+F2SdP/Tx9TNwWAyikG6Em1DHw+F7nmzRWf3fbOQE5zPzPJCAd0sJaAzsbrfX01tjRB4sImxOGQC0OkP4vKxUg9ca5cIQMGXCjT+iXi0XUxzrrLFYk6iGaumUHE2W6SJMSEGZFYswv2Xd/+hj1HnRNtK/s5B55p77WddSv3kzAuBC4SS43Eg21JTpbQCEhWn0vLCD98HHqGBA1+oSW264Ktc8tQr0Acj1JUM1PfLmK7SbZKhguHrUSw1Y6jy2f/OmzW1fu41ZHlC+cMrxR/FQG5fR4X66CXXiPjUCupxdiANkgYAGZyvNYePqadO0VECUfwSS9epflem4qBQ8GkIqHcloZNzo8u/jyEfXBw64uHfNko5kAFFI5heDxAdLxqH+fkvCr4G2Y1IOncsOTHBCn+4oFKASPDZAOwISHWjFiu2LMNfvG0ysgDh4uKP29TK/B7kL1TeCajgjGPKbB+Jgpy4RqzsfAJAMUI/pQMWHgUPB0X57vICrbafWYLdQ6IM7g6ZCrFHuJQKGDeb7Wtm2zexNa7GspgHzjTLZuzBalfId1loSntwjEGY+J1ajn/9i+VFv34ntcAhdrKaeXZQMoNh7X8gjsES6ma/muo59k72sUQDnu6EgCiJr/6Hh85a1prYxvETkGUCgebsNUcbme6pFFEt0BSj7s7jgD0ZTMcqNYH3hmKgfSIZm6qz5uBKZ6ColgoYBKwzMIoD5uhq37830mzIFWKfDMNfPtXQfubR44eAwNqOociIoo5GZQUHCfhJOy6zrQLLSPLB1vDo6WUWV7TniSAwr94mJFN1cZTpn9joFH7bLmR4vwyOQ4LIwmztfkfCTMIIvqQ7bc+p4NFjtniNF12Uaqd/Y3YWG09M9ngxYaw+ER8qyMxFHs5OgcXNk/n6T0TYnH17rPfnz5hY25vaXTfU+SVgWIulszBqLQrosCZ7fdhvnm4P8+84nFF1+5unX59ay/m1r2xp9YfPGV7plbrm4tNR7KyPK03YXNvZvw7dbH//ucQyzNqA4QpYpzHVJFySNC58xM701dH1TSwVPFRiBs2c2tuGyAXGhci8+G2vgnOVAAuC7B5qCj4MGejmFbnCYn1WcYqai5D2aWnTN0gO2CBVAmeDj/ykOWeujNtz5IAGUedVLh8YHALBFxrYMWQBlEHVMeEnuOi7Pq0HYNOeY3o6gzFJ73L36zP93ZG3HHiSQCZRJ1uHioEURfsmpbLD8LeIoBtD45c1YdZfaVzX3NsOsgqDmUAEoO585tvZjxlj7wcJLp2pLn7AGpeGIeY0sFhC3Fu/EgAZRxrhP7UCbbumhq04cPMCW9AMqky+qz6aPOtgpQAA0ceai7E0jvAQ0cmrsb1ubugVEzBz9sfw2PHzoZ5doCKFM8IZDU6+21Uxg1Y+PS0ZiAbIgE0MB4QlsLLey3e3C73QbXLogUeKSM7zlhThEd5pp5mLa7xnzGFrWoeCiAakCU5XPjY0PqMwEPOflDAEVEVGILmVMrFVLWD92NngMZ1k5z1u9QsNQOKbsqjAujuwZ3QHGo5kJbAqTq1kSHgB0Kki/y5QxpZgFhol4oqBjTJLlDmmlAId1nyDyafqoa5dry3PgKMYVGDtt7uk6AnYnzgWrFhHlEQaz3clWJVZ9QJi0NpNwQCaACq8ScEAmgghC5HpEggKR5Ebkek1Ddw1akxQXkm+EXQNJYA5tDRyEBVDAeASQtGNDQiARQoaBsTQBJYyOSLkwaG5hUYdLKRCyApAkgaYO1vwFXmqeVr3qApgAAAABJRU5ErkJggg==", "2": "data:image/png;base64,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", "1": "data:image/png;base64,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", "0": "data:image/png;base64,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"};
  const EFFECT = {"7": "7 巨人：２妖精、３幽霊に負ける", "6": "6 皇帝：１奴隷に負ける", "5": "5 魔女：【復活】このカードで負けた時、魔女を手札に戻し好きなカードを1枚捨てる", "4": "4 市民：【底力】４戦目のみ強さを２倍にする", "3": "3 幽霊：７巨人に勝つ／【交換】相手の手札から１枚をランダムで奪い、手札から好きなカードを1枚返す", "2": "2 妖精：７巨人に勝つ／【強化】次ラウンドの自分カードの強さを２倍にする", "1": "1 奴隷：６皇帝に勝つ", "0": "0 傀儡：相手が１奴隷以外なら引き分けにする"};
  const HOWTO = ["1/8\nこれは［８カード］\n１対１の心理カードバトルです\n\n・カードは０〜７の８種類\n［０傀儡 １奴隷 ２妖精 ３幽霊\n４市民 ５魔女 ６皇帝 ７巨人］\n・それぞれランダムに４枚ずつ手札が配られる", "2/8\nお互いに手札から１枚ずつカードを出し合って勝負します\n【基本ルール：数字が高い方の勝ち】\n\n［例］\n・４市民は１奴隷に勝つ\n・６皇帝は４市民に勝つ\n・７巨人は６皇帝に勝つ", "3/8\nカードには特殊効果があり勝敗に影響します\n\n［例］\n・１奴隷：６皇帝に勝つ\n・2 妖精：７巨人に勝つ／【強化】次ラウンドの自分カードの強さを２倍にする\n\nカード効果は下にスクロールすればいつでも見られます", "4/8\n２戦して勝ち数の多い方の勝利です\n\n［例］\n２勝０敗　勝利！\n１勝１分　勝利！", "5/8\n２戦して「１勝１敗」だった場合、延長戦に突入します\n\n延長戦では先に次の１勝を取った方の勝利となります", "6/8\n４戦して手札を使い切っても決着がつかなかった場合、引き分けとなります\n\n［例］\n１戦目　勝ち\n２戦目　負け\n （１勝１敗なので延長） \n３戦目　分け\n４戦目　分け\n\n［結果：引き分け］", "7/8\n【連勝モード】ではこれを繰り返しＣＰＵに何連勝できるかを競えます\n連勝数によってたまに敵の強さが変わります\n\n【カスタムモード】では好きな手札で好きな強さのＣＰＵと対戦できます", "8/8\n８カードを制するのは……\n\nこの俺だ──"];

  const STREAK_KEY='eightcard_best_streak';

  const logEl = $("#log");
  function addLog(msg){
    const line = document.createElement('div');
    line.className = 'line';
    line.textContent = msg;
    logEl.appendChild(line);
    logEl.scrollTop = logEl.scrollHeight;
  }
  function showModal(builder){
    const root=$("#modalRoot"); root.classList.remove("hidden"); root.innerHTML="";
    const back=el("div",{className:"modalBackdrop"});
    const box=el("div",{className:"modal"});
    const close=()=>{ root.classList.add("hidden"); root.innerHTML=""; };
    builder(box, close);
    back.appendChild(box); root.appendChild(back);
  }
  function closeAllOverlays(){
    const mr=$("#modalRoot"), or=$("#overlayRoot");
    mr.classList.add("hidden"); mr.innerHTML="";
    or.classList.add("hidden"); or.innerHTML="";
  }
  function overlay(text, sub, btn="OK", onClick=null){
    const root=$("#overlayRoot"); root.classList.remove("hidden"); root.innerHTML="";
    const wrap=el("div",{className:"overlayWin"});
    const panel=el("div",{className:"overlayPanel"});
    panel.append(el("h2",{textContent:text}), el("div",{textContent:sub||""}));
    const b=el("button",{className:"btn",textContent:btn});
    b.onclick=()=>{ root.classList.add("hidden"); onClick && onClick(); };
    panel.append(el("div",{style:"height:10px"}), b);
    wrap.appendChild(panel); root.appendChild(wrap);
  }

  function cardNode(id, clickable=true, onClick=null){
    const b = el("button",{className:"card"});
    b.append(el("img",{src:IMG[id], alt:NAMES[id]}), el("span",{textContent: id+" "+NAMES[id]}));
    if (clickable && onClick){ b.onclick=onClick; } else { b.classList.add("isLocked"); }
    return b;
  }
  function renderPlayed(hostId, id){
    const host = $("#"+hostId); host.innerHTML="";
    if (id==null){ host.textContent="—"; return; }
    const node = cardNode(id, false, null);
    host.appendChild(node);
  }
  function renderBack(hostId){
    const host=$("#"+hostId); host.innerHTML="";
    const wrap = el("div",{className:"flipWrap", id:"cpuFlip"});
    const inner = el("div",{className:"flipInner"});
    const back = el("div",{className:"face back"});
    const q = el("div",{className:"q", textContent:"？"});
    back.append(q, el("span",{className:"lbl", textContent:"CPU"}));
    const front = el("div",{className:"face front"});
    inner.append(back, front);
    wrap.appendChild(inner);
    host.appendChild(wrap);
  }
  function revealCpuCard(id){
    const wrap = $("#cpuFlip");
    if (!wrap){ renderPlayed("cPlay", id); return; }
    const inner = wrap.querySelector('.flipInner');
    const front = wrap.querySelector('.face.front');
    front.innerHTML="";
    const node = cardNode(id, false, null);
    front.appendChild(node);
    requestAnimationFrame(()=>{ wrap.classList.add("flipped"); });
  }

  function setModeActive(which){
    $("#btnStreak").classList.toggle("modeActive", which==="streak");
    $("#btnCustom").classList.toggle("modeActive", which==="custom");
    $("#btnHow").classList.toggle("modeActive", which==="how");
    $("#cpuStrength").classList.toggle("how", which==="how");
  }

  // --- Game state ---
  let mode="streak";
  let pHand=[], cHand=[];
  let pWins=0, cWins=0, draws=0, round=1;
  let pPlayedCount=0, cPlayedCount=0;
  let pX2=false, cX2=false;
  let selectedIdx=null;
  let pMarks="", cMarks="";
  let streak=0;
  let cpuMode="normal"; // 'normal' | 'elite'
  let cpuSetting="normal"; // for custom: 'normal'|'elite'|'random'
  let customLastPicks=null, customLastStrength="normal";

  function getBest(){ return Number(localStorage.getItem(STREAK_KEY)||0); }
  function setBest(v){ localStorage.setItem(STREAK_KEY, String(v)); }

  function setStreakColor(n){
    const badge=$("#pRun");
    badge.classList.remove("streak-blue","streak-green","streak-yellow","streak-orange","streak-red","streak-rainbow");
    if (n>=16) badge.classList.add("streak-rainbow");
    else if (n>=13) badge.classList.add("streak-red");
    else if (n>=10) badge.classList.add("streak-orange");
    else if (n>=7)  badge.classList.add("streak-yellow");
    else if (n>=4)  badge.classList.add("streak-green");
    else if (n>=2)  badge.classList.add("streak-blue");
  }

  function updateStreakBadge(){
    const badge=$("#pRun");
    badge.className="badge"; // reset base
    if (mode!=="streak"){ badge.classList.add("hidden"); return; }
    if (streak>=1){
      badge.classList.remove("hidden");
      badge.textContent = String(streak)+"連勝中！";
      setStreakColor(streak);
    } else {
      badge.classList.add("hidden");
    }
  }
  function updateStreakUIForMode(){
    const show = (mode==="streak");
    $("#streakWrap").classList.toggle("hidden", !show);
    $("#bestWrap").classList.toggle("hidden", !show);
    if (!show) $("#pRun").classList.add("hidden");
  }

  function resetBoard(){
    pWins=cWins=draws=0; round=1; pPlayedCount=cPlayedCount=0;
    pX2=cX2=false; selectedIdx=null; pMarks=""; cMarks="";
    $("#pWins").textContent=pWins; $("#cWins").textContent=cWins; $("#roundNum").textContent=round;
    renderPlayed("pPlay", null); renderPlayed("cPlay", null);
    $("#pBuff").classList.add("hidden"); $("#cBuff").classList.add("hidden");
    $("#btnPlay").disabled=true; $("#roundFlag").classList.add("hidden");
    $("#selectedEffect").textContent="手札からカードを選ぶと、ここに効果が表示されます。";
    $("#pLast").textContent=" "; $("#cLast").textContent=" ";
    logEl.innerHTML="";
    updateStreakUIForMode();
    updateStreakBadge();
  }

  function deal4v4(){
    const d = shuffle([0,1,2,3,4,5,6,7]);
    pHand = d.slice(0,4).sort((a,b)=>a-b);
    cHand = d.slice(4,8).sort((a,b)=>a-b);
  }
  function renderHands(lock=false){
    const pH=$("#pHand"); pH.innerHTML="";
    pHand.forEach((id,i)=>{
      const b=cardNode(id, !lock, ()=>selectIdx(i));
      if (i===selectedIdx) b.classList.add("selected");
      pH.appendChild(b);
    });
    const cH=$("#cHand"); cH.innerHTML="";
    cHand.forEach(id=> cH.appendChild(cardNode(id,false)) );
  }
  function selectIdx(i){
    selectedIdx=i;
    [...$("#pHand").children].forEach((ch,idx)=>ch.classList.toggle("selected", idx===i));
    $("#btnPlay").disabled=false;
    $("#selectedEffect").textContent = EFFECT[pHand[i]];
  }

  function decideCpuModeForStreak(){
    let p = 0.0;
    if (streak >= 10) p = 0.85;
    else if (streak >= 4) p = 0.50;
    const elite = Math.random() < p;
    cpuMode = elite ? "elite" : "normal";
    const lbl=$("#cpuStrength");
    lbl.textContent = "強さ：" + (elite ? "エリート" : "ノーマル");
    lbl.classList.toggle("elite", elite);
  }
  function setCpuModeExplicit(name){
    cpuSetting = name;
    let label = "強さ：";
    if (name==="random"){
      const elite = Math.random() < 0.5;
      cpuMode = elite ? "elite" : "normal";
      label += "ランダム（今回：" + (elite?"エリート":"ノーマル") + "）";
    } else {
      cpuMode = (name==="elite")?"elite":"normal";
      label += (cpuMode==="elite"?"エリート":"ノーマル");
    }
    const lbl=$("#cpuStrength");
    lbl.textContent = label;
    lbl.classList.toggle("elite", cpuMode==="elite");
  }

  function startStreak(){
    closeAllOverlays();
    mode="streak"; setModeActive("streak");
    resetBoard(); deal4v4(); renderHands(false);
    $("#streak").textContent = String(streak);
    $("#bestStreak").textContent = String(Math.max(Number(localStorage.getItem(STREAK_KEY)||0), streak));
    decideCpuModeForStreak();
    addLog("=== 連勝モード：新しいゲームを開始 ===");
    addLog("あなたの手札："+pHand.map(x=>x+" "+NAMES[x]).join(" / "));
    addLog("CPUの手札　："+cHand.map(x=>x+" "+NAMES[x]).join(" / "));
  }

  function startCustom(picks, strength){
    closeAllOverlays();
    mode="custom"; setModeActive("custom");
    customLastPicks = picks.slice();
    customLastStrength = strength;
    resetBoard();
    pHand = picks.slice().sort((a,b)=>a-b);
    const remain = [0,1,2,3,4,5,6,7].filter(x=>!pHand.includes(x));
    cHand = remain.slice().sort((a,b)=>a-b);
    setCpuModeExplicit(strength);
    renderHands(false);
    $("#streak").textContent = String(streak);
    $("#bestStreak").textContent = String(Math.max(Number(localStorage.getItem(STREAK_KEY)||0), streak));
    addLog("=== カスタムモード：開始 ===");
    addLog("あなたの手札："+pHand.map(x=>x+" "+NAMES[x]).join(" / "));
    addLog("CPUの手札　："+cHand.map(x=>x+" "+NAMES[x]).join(" / "));
  }

  function powerOf(id, playedCount, hasX2){
    let v=id;
    if (id===4 && playedCount===3) v=8;
    if (hasX2) v*=2;
    return v;
  }

  function spawnConfetti(n=100){
    const root = el('div',{className:'confetti'});
    const colors = ['#ff4d4f','#40a9ff','#73d13d','#faad14','#9254de','#13c2c2'];
    for(let i=0;i<n;i++){
      const p = el('i');
      p.style.left = (Math.random()*100)+'vw';
      p.style.color = colors[(Math.random()*colors.length)|0];
      p.style.animationDelay = (Math.random()*0.2)+'s';
      p.style.transform = 'translateY(-10px) rotate(' + ((Math.random()*180)|0) + 'deg)';
      root.appendChild(p);
    }
    document.body.appendChild(root);
    setTimeout(()=>root.remove(), 1000);
  }

  function loseComment(n){
    if (n<=2)  return "まだまだいけるはず！";
    if (n<=4)  return "眠れる獅子が起きつつある";
    if (n<=6)  return "強者現る、か";
    if (n<=9)  return "昔習ってた？";
    if (n<=13) return "プロ入りしないか？";
    if (n<=19) return "生ける伝説──";
    if (n<=29) return "強すぎる、世界ランキングを用意してなくてすみません";
    if (n<=49) return "あなたは今すぐ攻略動画を投稿してください…！";
    return "参りました、あなたがゲームルールを考えてください…！！！";
  }

  function endGame(kind){
    const best = Math.max(Number(localStorage.getItem(STREAK_KEY)||0), 0);
    if (kind==='win'){
      spawnConfetti(100);
      if (mode==="streak"){
        const newSt = streak + 1;
        streak = newSt;
        if (streak > best) localStorage.setItem(STREAK_KEY, String(streak));
      }
    } else if (kind==='lose'){
      if (mode==="streak"){
        const ended = streak;
        const newBest = Math.max(best, ended);
        if (newBest !== best) localStorage.setItem(STREAK_KEY, String(newBest));
        const msg = "今回の記録　" + ended + "連勝！";
        const cm  = loseComment(ended);
        overlay(msg, cm, "もう一回", ()=>{ try{ startStreak(); }catch(e){ try{ location.reload(); }catch(_e){} } });
        streak = 0;
      }
    }
    $("#streak").textContent = String(streak);
    $("#bestStreak").textContent = String(Math.max(Number(localStorage.getItem(STREAK_KEY)||0), streak));
    updateStreakBadge();

    if (mode==="streak" && kind==='lose') return;

    const msg = kind==='win' ? 'あなたの勝ち！' : kind==='lose' ? 'CPUの勝ち！' : '引き分け';
    setTimeout(()=>{
      const root=$("#overlayRoot"); root.classList.remove("hidden"); root.innerHTML="";
      const wrap=el("div",{className:"overlayWin"});
      const panel=el("div",{className:"overlayPanel"});
      panel.append(el("h2",{textContent:msg}));

      if (mode==="streak"){
        const btn=el("button",{className:"btn",textContent:"次のゲームへ"});
        const cap=el("div",{textContent: (kind==='lose')? "" : ("現在 " + streak + " 連勝中") });
        btn.onclick=()=>{ root.classList.add("hidden"); startStreak(); };
        panel.append(cap, el("div",{style:"height:10px"}), btn);
      } else {
        const row=el("div",{className:"row", style:"justify-content:center; gap:12px; flex-wrap:wrap;"});
        const b1=el("button",{className:"btn", textContent:"このままもう一度戦う"});
        const b2=el("button",{className:"btn", textContent:"手札ランダムでもう一度戦う"});
        const b3=el("button",{className:"btn", textContent:"カスタムし直す"});

        b1.onclick=()=>{ root.classList.add("hidden"); startCustom(customLastPicks, customLastStrength); };
        b2.onclick=()=>{ 
          root.classList.add("hidden");
          const pool=[0,1,2,3,4,5,6,7];
          const picks = shuffle(pool.slice()).slice(0,4).sort((a,b)=>a-b);
          startCustom(picks, customLastStrength);
        };
        b3.onclick=()=>{ root.classList.add("hidden"); startCustomFlow(); };
        row.append(b1,b2,b3);
        panel.append(row);
      }

      wrap.appendChild(panel); root.appendChild(wrap);
    }, 180);
  }

  async function doRound(){
    if (selectedIdx==null) return;
    const pId = pHand.splice(selectedIdx,1)[0];
    selectedIdx=null; $("#btnPlay").disabled=true; renderHands(true);

    renderPlayed("pPlay", pId);
    renderBack("cPlay");
    await sleep(1100);

    const cId = cHand.splice((Math.random()*cHand.length)|0,1)[0];

    revealCpuCard(cId);
    renderHands(true);
    await sleep(1100);

    $("#roundFlag").className="resultFlag draw hidden";
    addLog("ラウンド"+round+"： あなた（"+pId+" "+NAMES[pId]+"） vs CPU（"+cId+" "+NAMES[cId]+"）");

    let pPower=pId, cPower=cId;
    if (pX2){ pPower*=2; pX2=false; $("#pBuff").classList.add("hidden"); addLog("（あなた：次×2をこのラウンドに適用）"); }
    if (cX2){ cPower*=2; cX2=false; $("#cBuff").classList.add("hidden"); addLog("（CPU：次×2をこのラウンドに適用）"); }
    if (pId===4 && pPlayedCount===3){ pPower*=2; addLog("あなたの市民：4枚目で×2（=8）"); }
    if (cId===4 && cPlayedCount===3){ cPower*=2; addLog("CPUの市民：4枚目で×2（=8）"); }

    let forced=false;
    if (pId===0 && cId!==1){ forced=true; addLog("傀儡効果：このラウンドは引き分け（あなた）"); }
    if (cId===0 && pId!==1){ forced=true; addLog("傀儡効果：このラウンドは引き分け（CPU）"); }

    let pLose=false, cLose=false;
    if (pId===7 && (cId===2||cId===3)) pLose=true;
    if (cId===7 && (pId===2||pId===3)) cLose=true;
    if (pId===6 && cId===1) pLose=true;
    if (cId===6 && pId===1) cLose=true;

    const pCard = document.querySelector("#pPlay .card");
    const cCard = document.querySelector("#cPlay .card");
    pCard && pCard.classList.remove("winB","loseB");
    cCard && cCard.classList.remove("winB","loseB");

    let result="draw";
    if (forced) result="draw";
    else if (pLose && !cLose) result="c";
    else if (cLose && !pLose) result="p";
    else if (pPower>cPower) result="p";
    else if (cPower>pPower) result="c";

    if (result==="p"){
      pWins++; $("#roundFlag").textContent="あなたの勝ち"; $("#roundFlag").className="resultFlag win";
      pCard && pCard.classList.add("winB"); cCard && cCard.classList.add("loseB");
      pMarks+="○"; cMarks+="×";
    } else if (result==="c"){
      cWins++; $("#roundFlag").textContent="CPUの勝ち"; $("#roundFlag").className="resultFlag lose";
      cCard && cCard.classList.add("winB"); pCard && pCard.classList.add("loseB");
      pMarks+="×"; cMarks+="○";
    } else {
      draws++; $("#roundFlag").textContent="引き分け"; $("#roundFlag").className="resultFlag draw";
      pMarks+="−"; cMarks+="−";
    }
    $("#roundFlag").classList.remove("hidden");
    $("#pLast").textContent = pMarks;
    $("#cLast").textContent = cMarks;
    await sleep(850);

    pPlayedCount++; cPlayedCount++;
    $("#pWins").textContent=pWins; $("#cWins").textContent=cWins;

    const roundsPlayed = pPlayedCount;
    let endNow = false;
    let endKind = "draw";

    if (roundsPlayed>=2){
      if (pWins===2 || cWins===2) { endNow=true; endKind = (pWins>cWins)?"win":"lose"; }
      else if ((pWins===1 && cWins===0 && draws>=1) || (cWins===1 && pWins===0 && draws>=1)){
        endNow=true; endKind = (pWins>cWins)?"win":"lose";
      }
    }
    if (!endNow && roundsPlayed>=4){
      if (pWins>cWins) { endNow=true; endKind="win"; }
      else if (cWins>pWins){ endNow=true; endKind="lose"; }
      else { endNow=true; endKind="draw"; }
    }

    // --- ラウンド結果が出た直後：延長／終了の早期returnをする“前”に
//     ここで「続行時のみ」幽霊・魔女を発動させる -------------------------
if (!endNow) {

  // v7の showModal(builder) を使い、カードをクリックした瞬間に確定する選択UI（OKボタン無し）
  async function chooseFromPlayerHand_clickPrompt(promptMsg){
    return new Promise((resolve)=>{
      showModal((box, close)=>{
        const title = el("div",{className:"modalTitle", textContent: promptMsg});
        const grid  = el("div",{className:"grid"});
        // クリックで即決定
        pHand.forEach((cid, idx)=>{
          const node = cardNode(cid, true, ()=>{
            const chosen = idx;
            close();
            resolve(chosen);
          });
          grid.appendChild(node);
        });
        box.appendChild(title);
        box.appendChild(grid);
      });
    });
  }

  // ===== 3「幽霊」 =====
  // あなたの幽霊：相手から奪い → 自分の手札から1枚選んで相手に返す（あなたが選ぶ）
  if (pId === 3 && cHand.length > 0) {
    const stealIdx = (Math.random()*cHand.length)|0;
    const stolen = cHand.splice(stealIdx,1)[0];
    pHand.push(stolen);
    addLog(`あなたの幽霊：相手から『${NAMES[stolen]}』を奪った。手札から1枚選んで相手に返してください。`);
    const giveIdx = await chooseFromPlayerHand_clickPrompt('あなたの幽霊：相手から『'+NAMES[stolen]+'』を奪った。手札から1枚選んで相手に返してください。');
    const give = pHand.splice(giveIdx,1)[0];
    cHand.push(give);
    addLog(`あなたは『${NAMES[give]}』を相手に返した。`);
    renderHands(true);
  }

  // CPUの幽霊：あなたから奪い → CPUが自分の手札から1枚ランダムで返す（あなたは選ばない）
  if (cId === 3 && pHand.length > 0) {
    const stealIdx = (Math.random()*pHand.length)|0;
    const stolen = pHand.splice(stealIdx,1)[0];
    cHand.push(stolen);
    // CPUが返すカード（ランダム）を選ぶ（※奪ったカードを返す可能性もあり）
    if (cHand.length > 0) {
      const giveIdx = (Math.random()*cHand.length)|0;
      const give = cHand.splice(giveIdx,1)[0];
      pHand.push(give);
      const msg = `CPUの幽霊：あなたの『${NAMES[stolen]}』を奪った。CPUは『${NAMES[give]}』を返した。`;
addLog(msg);
await new Promise((resolve)=>{
  showModal((box, close)=>{
    const title = el('div',{className:'modalTitle', textContent: msg});
    const foot  = el('div',{className:'modalFoot'});
    const ok    = el('button',{className:'primary', textContent:'OK'});
    ok.onclick = ()=>{ close(); resolve(); };
    foot.appendChild(ok);
    box.appendChild(title);
    box.appendChild(foot);
  });
});

    } else {
      const msg = `CPUの幽霊：あなたの『${NAMES[stolen]}』を奪った。`;
addLog(msg);
await new Promise((resolve)=>{
  showModal((box, close)=>{
    const title = el('div',{className:'modalTitle', textContent: msg});
    const foot  = el('div',{className:'modalFoot'});
    const ok    = el('button',{className:'primary', textContent:'OK'});
    ok.onclick = ()=>{ close(); resolve(); };
    foot.appendChild(ok);
    box.appendChild(title);
    box.appendChild(foot);
  });
});

    }
    renderHands(true);
  }

  // ===== 5「魔女」 =====
  // あなたの魔女が負け：魔女が手札に戻る → 自分の手札から1枚捨てる（あなたが選ぶ）
  if (result === 'c' && pId === 5) {
    pHand.push(5);
    const prompt = '魔女が手札に戻った。自分の手札から1枚捨ててください。';
    const dropIdx = await chooseFromPlayerHand_clickPrompt(prompt);
    const dropped = pHand.splice(dropIdx,1)[0];
    addLog(`魔女が手札に戻った。あなたは『${NAMES[dropped]}』を捨てた。`);
    renderHands(true);
  }
  // CPUの魔女が負け：魔女がCPU手札に戻る → CPUがランダムで1枚捨てる
  if (result === 'p' && cId === 5) {
    cHand.push(5);
    if (cHand.length > 0) {
      const di = (Math.random()*cHand.length)|0;
      const d = cHand.splice(di,1)[0];
      addLog(`CPUの魔女が手札に戻り、『${NAMES[d]}』を捨てた。`);
    } else {
      addLog(`CPUの魔女が手札に戻った。`);
    }
    renderHands(true);
  }
}

// ==== ここから元の早期終了判定 ====
if (endNow){
  await sleep(220);
  return endGame(endKind);
}

// 続行時のバフ遷移
    if (pId===2){ pX2=true; $("#pBuff").classList.remove("hidden"); addLog("あなたの妖精：次ラウンド×2を予約"); }
    if (cId===2){ cX2=true; $("#cBuff").classList.remove("hidden"); addLog("CPUの妖精：次ラウンド×2を予約"); }

    round++; $("#roundNum").textContent=round;
    renderHands(false);
  }

  function startCustomFlow(){
    mode="custom"; setModeActive("custom");
    showModal((box, close)=>{
      const h3=el("h3",{textContent:"カスタム：手札を選んでください（4枚）"});
      const sub=el("div",{textContent:"8枚の中から重複なしで4枚を選択。『ランダム』でもOK。"});
      const grid=el("div",{className:"grid"});
      const pool=[0,1,2,3,4,5,6,7];
      let chosen=new Set();

      function refresh(){
        grid.innerHTML="";
        pool.forEach(id=>{
          const selected = chosen.has(id);
          const b = cardNode(id, true, ()=>{
            if (selected) chosen.delete(id);
            else{ if (chosen.size>=4) return; chosen.add(id); }
            refresh();
          });
          if (selected) b.classList.add("selected");
          grid.appendChild(b);
        });
        info.textContent="選択："+chosen.size+" / 4";
        ok.disabled = (chosen.size!==4);
      }

      const info=el("div",{className:"sectionTitle", textContent:"選択：0 / 4"});
      const cpuLbl=el("label",{textContent:"CPUの強さ："});
      const sel=el("select"); sel.innerHTML='<option value="normal">ノーマル</option><option value="elite">エリート</option><option value="random">ランダム(50%)</option>';
      const rand=el("button",{className:"btn",textContent:"ランダム"}); rand.onclick=()=>{ chosen=new Set(shuffle(pool.slice()).slice(0,4)); refresh(); };
      const ok=el("button",{className:"btn",textContent:"開始",disabled:true}); ok.onclick=()=>{ const picks=[...chosen]; close(); startCustom(picks, sel.value); };

      refresh();
      const row=el("div",{className:"row"}); row.append(cpuLbl, sel, rand, ok);
      box.append(h3, sub, grid, el("div",{style:"height:8px"}), info, row);
    });
  }

  function showHowTo(){
    mode="how"; setModeActive("how");
    let idx = 0;
    function render(){
      showModal((box, close)=>{
        const h3=el("h3",{textContent:"遊び方"});
        const body=el("div",{style:"white-space:pre-line;min-height:200px", textContent:HOWTO[idx]});
        const row=el("div",{className:"row", style:"justify-content:space-between"});
        const left=el("div",{}), right=el("div",{});
        const back=el("button",{className:"btn",textContent:"戻る"});
        const next=el("button",{className:"btn",textContent:(idx===HOWTO.length-1)?"閉じる":"次へ"});
        back.onclick=()=>{ if(idx>0){ idx--; render(); } };
        next.onclick=()=>{ if(idx<HOWTO.length-1){ idx++; render(); } else { close(); setModeActive("streak"); mode="streak"; } };
        if (idx===0) back.disabled=true;
        left.append(back); right.append(next); row.append(left,right);
        box.append(h3, body, el("div",{style:"height:8px"}), row);
      });
    }
    render();
  }

  document.getElementById('btnHow').addEventListener('click', showHowTo);
  document.getElementById('btnStreak').addEventListener('click', startStreak);
  document.getElementById('btnCustom').addEventListener('click', startCustomFlow);
  document.getElementById('btnPlay').addEventListener('click', doRound);

  setModeActive("streak");
  startStreak();
})();
</script>
</body>
</html>
